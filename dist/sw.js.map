{"version":3,"sources":["sw.js"],"names":["CACHE_NAME","urlsToCache","self","addEventListener","event","console","log","data","skipWaiting","waitUntil","caches","open","then","cache","addAll","respondWith","match","request","resp","fetch","response","put","clone","keys","keyList","Promise","all","map","key","delete"],"mappings":"AAAA,IAAMA,UAAU,GAAG,CAAnB;AACA,IAAMC,WAAW,GAAG,CAAC,eAAD,CAApB,EACA;;AAEAC,IAAI,CAACC,gBAAL,CAAsB,SAAtB,EAAiC,UAAAC,KAAK,EAAI;AACxCC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,MAAIF,KAAK,CAACG,IAAN,KAAe,aAAnB,EAAkCL,IAAI,CAACM,WAAL;AACnC,CAHD;AAKAN,IAAI,CAACC,gBAAL,CAAsB,SAAtB,EAAiC,UAAAC,KAAK,EAAI;AACxCC,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EADwC,CAExC;;AAEAF,EAAAA,KAAK,CAACK,SAAN,CACEC,MAAM,CAACC,IAAP,CAAYX,UAAZ,EAAwBY,IAAxB,CAA6B,UAAAC,KAAK,EAAI;AACpCR,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,WAAOO,KAAK,CAACC,MAAN,CAAab,WAAb,CAAP;AACD,GAHD,CADF;AAMD,CAVD;AAYAC,IAAI,CAACC,gBAAL,CAAsB,OAAtB,EAA+B,UAAUC,KAAV,EAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAAA,KAAK,CAACW,WAAN,CACEL,MAAM,CAACM,KAAP,CAAaZ,KAAK,CAACa,OAAnB,EAA4BL,IAA5B,CAAiC,UAAUM,IAAV,EAAgB;AAC/C,WACEA,IAAI,IACJC,KAAK,CAACf,KAAK,CAACa,OAAP,CAAL,CAAqBL,IAArB,CAA0B,UAAUQ,QAAV,EAAoB;AAC5C,aAAOV,MAAM,CAACC,IAAP,CAAYX,UAAZ,EAAwBY,IAAxB,CAA6B,UAAUC,KAAV,EAAiB;AACnDA,QAAAA,KAAK,CAACQ,GAAN,CAAUjB,KAAK,CAACa,OAAhB,EAAyBG,QAAQ,CAACE,KAAT,EAAzB;AACA,eAAOF,QAAP;AACD,OAHM,CAAP;AAID,KALD,CAFF;AASD,GAVD,CADF;AAaD,CAvBD;AAyBAlB,IAAI,CAACC,gBAAL,CAAsB,UAAtB,EAAkC,UAAUC,KAAV,EAAiB;AACjDC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AAEAF,EAAAA,KAAK,CAACK,SAAN,CACEC,MAAM,CAACa,IAAP,GAAcX,IAAd,CAAmB,UAAUY,OAAV,EAAmB;AACpC,WAAOC,OAAO,CAACC,GAAR,CACLF,OAAO,CAACG,GAAR,CAAY,UAAUC,GAAV,EAAe;AACzB,UAAIA,GAAG,KAAK5B,UAAZ,EAAwB;AACtB,eAAOU,MAAM,CAACmB,MAAP,CAAcD,GAAd,CAAP;AACD;AACF,KAJD,CADK,CAAP;AAOD,GARD,CADF;AAWD,CAdD","file":"sw.js","sourceRoot":"..","sourcesContent":["const CACHE_NAME = 1\nconst urlsToCache = ['/sw-demo/dist']\n// const reqExt = 'html,js,css,png'\n\nself.addEventListener('message', event => {\n  console.log('skipWaiting')\n  if (event.data === 'skipWaiting') self.skipWaiting()\n})\n\nself.addEventListener('install', event => {\n  console.log('call install')\n  // self.skipWaiting()\n\n  event.waitUntil(\n    caches.open(CACHE_NAME).then(cache => {\n      console.log('Opened cache')\n      return cache.addAll(urlsToCache)\n    })\n  )\n})\n\nself.addEventListener('fetch', function (event) {\n  // const url = event.request.url\n  // const i = url.lastIndexOf('.')\n  // const ext = url.substr(i + 1)\n  // console.log(url)\n  // if (!reqExt.includes(ext) || !url.includes('http')) {\n  //   event.respondWith(fetch(event.request))\n  //   return\n  // }\n\n  event.respondWith(\n    caches.match(event.request).then(function (resp) {\n      return (\n        resp ||\n        fetch(event.request).then(function (response) {\n          return caches.open(CACHE_NAME).then(function (cache) {\n            cache.put(event.request, response.clone())\n            return response\n          })\n        })\n      )\n    })\n  )\n})\n\nself.addEventListener('activate', function (event) {\n  console.log('activate')\n\n  event.waitUntil(\n    caches.keys().then(function (keyList) {\n      return Promise.all(\n        keyList.map(function (key) {\n          if (key !== CACHE_NAME) {\n            return caches.delete(key)\n          }\n        })\n      )\n    })\n  )\n})\n"]}